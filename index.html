<!DOCTYPE html>
<html lang="pt-br">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>s13 - Surpresas</title>
    <link rel="stylesheet" href="styles.css">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="icon" href="titulo.png" type="image/jpeg">
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-6809594544652238"
        crossorigin="anonymous"></script>
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-ZHR64QY9RD"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag() { dataLayer.push(arguments); }
        gtag('js', new Date());

        gtag('config', 'G-ZHR64QY9RD');
    </script>
</head>

<body>
    <div class="bg-space" aria-hidden="true">
        <span class="stars"></span>
        <span class="neon-lines"></span>
    </div>
    <header>
        <div class="float-x">
            <div class="float-y">
                <img id="titleImage" src="titulo.png" alt="titulo">
            </div>
        </div>
    </header>


    <div class="search-container">
        <div class="search-container">
            <input type="text" id="searchInput" placeholder="Buscar missão..." onkeyup="searchMission()">
            <!-- Adicionado o evento onkeyup -->
            <button id="searchButton" type="button" onclick="clearInput()">Limpar</button>
            <!-- Adicionado type="button" -->
        </div>
    </div>
        <div class="mission-group">
    <div class="mission">
        <div class="mission-header" onclick="toggleMission(this.parentElement)">
            <span class="new-badge"></span>
                       Primeira Surpresa (03/11)
        </div>
        <div class="mission-content">
            <ul>
                <li>
                    <p><strong>(0/15) Ir PvP (Normal) -</strong> Ir 15 PvP Normal</p>
                </li> 
                <li>
                    <p><strong>(0/5) BF -</strong> Bugou Fácil</p>
                </li>  
                <li>
                    <p><strong>(0/90) SPA -</strong> Ficar 90 minutos no SPA</p>
                </li> 
                <li>
                    <p><strong>(0/10) Matar GvG (Normal) -</strong> Matar 10 no GvG Normal</p> 
                </li>                
            </ul>
        </div>
        <!-- FIM MODELO MISSÃO -->
    </div>
</div>

        <!-- ---------------------------------------------------------------------------------------------------- -->
        <!-- ---------------------------------------------------------------------------------------------------- -->
        <!-- ---------------------------------------------------------------------------------------------------- -->
        <!-- ---------------------------------------------------------------------------------------------------- -->
        <!-- ---------------------------------------------------------------------------------------------------- -->
</section>
<script>
    function clearInput() {
        document.getElementById("searchInput").value = "";
        searchMission();
    }

    function toggleMission(missionElement) {
        const content = missionElement.querySelector('.mission-content');
        if (!content) return;
        content.style.display = (content.style.display === "none" || content.style.display === "") ? "block" : "none";
    }

    function searchMission() {
        const input = document.getElementById("searchInput");
        if (!input) return;
        const filter = input.value.toUpperCase();
        const missions = document.querySelectorAll(".mission");

        for (const mission of missions) {
        const text = mission.textContent || mission.innerText;
        const trimmedText = (text || "").toUpperCase().trim();

        const match = trimmedText.includes(filter) || filter === "";
        mission.classList.toggle("non-matching", !match);

        const missionHeader = mission.querySelector(".mission-header");
        if (missionHeader) missionHeader.style.backgroundColor = match ? "" : "rgba(220,220,220,0.8)";
        mission.style.backgroundColor = match ? "" : "rgba(220,220,220,0.8)";
        mission.style.animation = match ? "pulseBackground 3s infinite ease-in-out, glowingBorder 2s infinite ease-in-out" : "none";

        const content = mission.querySelector('.mission-content');
        if (content) content.style.display = match ? "block" : "none";
        }
    }

    function copyMissions(missionGroup) {
        if (!missionGroup) return;
        const missions = missionGroup.querySelectorAll('.mission');
        if (!missions.length) return;

        let textToCopy = '';
        missions.forEach((mission) => {
        const headerEl = mission.querySelector('.mission-header');
        if (!headerEl) return;
        textToCopy += (headerEl.textContent || "").trim() + '\n';

        const details = mission.querySelectorAll('.mission-content li p');
        details.forEach((detail) => {
            let cleanDetail = (detail.textContent || "").trim().replace(/(\s*\n\s*)+/g, ' ');
            textToCopy += '- ' + cleanDetail + '\n';
        });
        textToCopy += '\n';
        });

        const textarea = document.createElement('textarea');
        textarea.value = textToCopy;
        document.body.appendChild(textarea);
        textarea.select();
        document.execCommand('copy');
        document.body.removeChild(textarea);
        alert("Missões copiadas para a área de transferência!");
    }

    function countVisitsInConsole() {
        const visitCount = localStorage.getItem('visitCountConsole');
        const newCount = visitCount ? (parseInt(visitCount, 10) || 0) + 1 : 1;
        localStorage.setItem('visitCountConsole', newCount);
        console.log(`Visitas nesta página: ${newCount}`);
    }

    document.addEventListener("DOMContentLoaded", function () {
        countVisitsInConsole();

        // Evita erro quando .destaque-branco p não existe
        const textElement = document.querySelector(".destaque-branco p");
        if (textElement) {
        const animations = ["lightPassHorizontal","lightPassVertical","lightPassDiagonal","lightPassCircular"];
        const randomDirection = animations[Math.floor(Math.random() * animations.length)];
        textElement.style.animation = `${randomDirection} 1s infinite linear`;
        }
    });

    function confirmarAcessoYoutube(event) {
        event.preventDefault();
        if (confirm("Deseja abrir o vídeo sobre a manutenção em uma nova aba?")) {
        window.open("https://www.youtube.com/watch?v=yTATPb8sJLo", "_blank");
        }
    }
</script>

</body>
</html>
